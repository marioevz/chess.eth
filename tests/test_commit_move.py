import pytest
from brownie import Chess, accounts, web3, reverts

@pytest.fixture
def chess_contract():
    return accounts[0].deploy(Chess)

@pytest.mark.parametrize("game_state,from_pos,to_pos,expected_end_state", 
    [
        ("0xcbaedabc99999999000000000000000000000000000000001111111143265234", "0x08", "0x10",
         "0xcbaedabc99999999000000000000000000000000000000011111111043265234"),

        ("0xcbaedabc99999999000000000000000000000000000000001111111143265234", "0x01", "0x12",
         "0xcbaedabc99999999000000000000000000000000000003001111111143265204"),
        
        ("0xcbaedabc99999099000000000000000000000000000009001111111143265234", "0x01", "0x12",
         "0xcbaedabc99999099000000000000000000000000000003001111111143265204"),
        
        ("0x0baedabc099990990900000000000000c0000000000003001111111143265204", "0x1f", "0x3f",
         "0xcbaedabc09999099090000000000000000000000000003001111111143265204"),

        ("0xcbaedabc09999099090000000000000000000000000003001111111143265204", "0x3f", "0x0f",
         "0x0baedabc0999909909000000000000000000000000000300c111111143265204"),

        ("0x0baedabc0999909909000000000000000000000000000300c111111143265204", "0x3b", "0x20",
         "0x0bae0abc09999099090000000000000d0000000000000300c111111143265204"),

        ("0x0bae0abc09999099090000000000000d0000000000000300c111111143265204", "0x3e", "0x2f",
         "0x00ae0abc09999099b90000000000000d0000000000000300c111111143265204"),
        
        ("0x00ae0abc09999099b90000000000000d0000000000000300c111111143265204", "0x06", "0x15",
         "0x00ae0abc09999099b90000000000000d0000000000300300c111111140265204"),

        ("0x00ae0abc09999099b90000000000000d0000000000300300c111111140265204", "0x33", "0x23",
         "0x00ae0abc09990099b90000000000900d0000000000300300c111111140265204"),
    
    ])
def test_commit_move(chess_contract, game_state, from_pos, to_pos, expected_end_state):
    assert chess_contract.commitMove(game_state, from_pos, to_pos) == expected_end_state
